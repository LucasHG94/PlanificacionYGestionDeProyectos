<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>Vista de proyectos</title>
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js">
        </script>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
    </head>
    <body>
        <!-- TODO Ajustar este script para que funcione correctamente-->
        <script type="text/javascript">
            jQuery(function(){
            var user = getCookie("username");
            window.alert("llego2");
            jQuery.get("http://localhost:8080/GestionProyectos/webresources/SimpleRoot/proyectos", {
                    user: user
                }, function(resultado) {
                    window.alert("llego");
                    for(j=0; j<resultado.length;j++){
                        document.write("<p>"+resultado[j].nombre+' <button type=\n\
                            "button" id="operaciones">Operaciones</button>\n\
                            <button type="button" id="consultar">Consultar</button>\n\
                            <button type="button" id="calendario">Calendario</button></p>');
                    }
                });
            document.write('<h3>Proyectos en los que eres jefe:</h3>');
            jQuery.get("http://localhost:8080/GestionProyectos/webresources/SimpleRoot/proyectosjefe", {
                    user: user
                }, function(resultado) {
                    for(j=0; j<resultado.length;j++){
                        document.write("<p>"+resultado[j].nombre+' <button type=\n\
                            "button" id="operaciones">Operaciones</button>\n\
                            <button type="button" id="consultar">Consultar</button>\n\
                            <button type="button" id="calendario">Calendario</button></p>');
                    }
                });    
            });
            jQuery("#operaciones").click(function(){
                
            });
            jQuery("#consultar").click(function(){
                
            });
            jQuery("#calendario").click(function(){
                
            });
            function setCookie(cname, cvalue, exdays) {
                var d = new Date();
                d.setTime(d.getTime() + (exdays*24*60*60*1000));
                var expires = "expires="+d.toUTCString();
                document.cookie = cname + "=" + cvalue + "; " + expires;
            }
            function getCookie(cname) {
                var name = cname + "=";
                var ca = document.cookie.split(';');
                for(var i=0; i<ca.length; i++) {
                    var c = ca[i];
                    while (c.charAt(0)===' ') c = c.substring(1);
                        if (c.indexOf(name) === 0) return c.substring(name.length, c.length);
                    }
                    return "";
            }

            function checkCookie() {
                var user = getCookie("username");
                if (user !== "") {
                    window.alert("Welcome again " + user);
                } else {
                    user = window.prompt("Please enter your name:", "");
                if (user !== "" && user !== null) {
                    setCookie("username", user, 365);
                }
                }
            }
        </script>
    </body>
</html>
